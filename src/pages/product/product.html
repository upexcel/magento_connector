<header [pagename]="'product'" [title]='product'></header>
<ion-content class="product">
    <ion-spinner class="apiSpinner" *ngIf="spin && !error"></ion-spinner>
    <p class="error" *ngIf="error" style="color:#f00; text-align: center;">Check Network Connection</p>
    <ion-grid  no-padding *ngIf="productData">
               <ion-row  responsive-lg responsive-md responsive-sm>
            <ion-col no-padding width-100 >
                <div class="imgbox">
                    <img src="{{images}}" class=" img cursorPointer"/>
                </div>
                <ion-slides pager #mySlider [options]="mySlideOptions" *ngIf="productData.body.data.media_images.length>0">
                            <ion-slide>
                        <ion-row class="center">
                            <ion-col class="maxWT" *ngFor = "let img of productData.body.data.media_images" (click)="slideClick(img)" >
                                     <img src="{{img}}" class="cursorPointer maxHt"/>
                            </ion-col>
                        </ion-row>
                    </ion-slide>
                </ion-slides>
                <ion-row class="padLeft10" *ngIf="productData.body.data.type!='grouped'">
                    <ion-col class='lineH0 no-padding'>
                        <ion-col class="padTB">
                            <h4 class="capitalize no-margin">{{productData.body.data.name}}</h4>
                        </ion-col> 
                        <ion-col class="padTB">
                            <p class="stock">{{productData.body.data.in_stock}}</p>
                            <btn-full *ngIf="productData.body.data.in_stock=='Out of Stock'" class="notifyBt" [titleFull]="'Notify Me'" (click)="notifySet()"></btn-full>
                        </ion-col>
                    </ion-col>
                </ion-row>
                <ion-row> 
                    <ion-col class="padTB"> 
                        <span id="font13" [ngClass]="{'line':(display_price*1) > (final_price*1), 'hide':(display_price*1) <= (final_price*1) , 'price':true}" class="price">{{productData.body.data.currency_sign}}{{display_price | number}}</span>
                        <span  [ngClass]="{'paddLeft10':(display_price*1) <= (final_price*1),'lineH2-4':true,'sPrice':true}" >{{productData.body.data.currency_sign}} {{final_price | number}}</span>
                    </ion-col>
                </ion-row>
                <span *ngIf="type=='configurable'">
                    <ion-row  *ngFor="let key of keys">
                        <ion-col *ngIf="productData.body.associated_products">
                            <ion-item class="selectlist">
                                <ion-label no-margin class="capitalize config">{{productData.body.associated_products.attributes[key].label}}</ion-label>
                                <ion-label class="font12 config no-margin" *ngIf="productData.body.associated_products.attributes[key].label=='Color'">
                                    <ion-buttons class="alignright">
                                        <ion-icon name="radio-button-on" dark id="color"></ion-icon>
                                    </ion-buttons>
                                </ion-label>
                                <ion-select [(ngModel)]="productData.body.associated_products.attributes[key].vertualKey"  [placeholder]="'select'"  (ngModelChange)="onChangeConfigurableAttribute(productData.body.associated_products.attributes[key].vertualKey, key)">
                                    <span *ngFor= "let obj of productData.body.associated_products.attributes[key].options">
                                        <ion-option *ngIf="selectshow || obj.shown"  [value]="obj" >
                                            <ion-label no-margin class="font12">
                                                {{obj.label}}&nbsp;+{{productData.body.data.currency_sign}}{{obj.price}}
                                            </ion-label>
                                        </ion-option>
                                    </span>
                                </ion-select>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                </span>
                <!--for group product-->
                <span *ngIf="type=='grouped'">
                    <group [grouped]="productData.body" [editCartData]="editCartData" (sendData)="group($event)"></group>
                </span>

                <!--for bundle product-->
                <bundle [bundle]="productData.body" [editCartData]="editCartData" (onChangeData)=diffrentTypeProductData($event) (onChange)=bundle($event)></bundle>

                <!--                for downloadable product-->
                <download  [data]="productData" (onChange)="diffrentTypeProductData($event)"></download>
                <!--for custom product-->
                <custom  [data]="productData" [editCartData]="editCartData" (onChange)="customData($event)"></custom>

                <div *ngIf="show_add_to_cart && show_add_to_cart.length > 0">
                    <ion-row *ngFor="let data of show_add_to_cart">
                        <ion-col class="padTB">
                            <p class="no-margin font20 padLeft10 capitalize offer fontWidth600" >Buy {{data.price_qty }}  for {{productData.body.data.currency_sign}} {{data.tierPrice | number}} each.  </p>
                        </ion-col>
                    </ion-row>
                </div>
                <ion-row>
                    <ion-col class="padTB">
                        <p class=" font13 padLeft10 capitalize "  [ngClass]="{'marginBottom50': true}">{{productData.body.data.short_description}}</p>
                    </ion-col>
                </ion-row>
                <ion-list *ngIf="additionalInformationData.length > 0 ">
                    <h4 class="padLeft20 capitalize">Additional Information</h4>
                    <ion-item *ngFor="let info of additionalInformationData">
                        <ion-row>
                            <ion-col class="no-margin no-padding" width-20> <span class="additionalInformation capitalize">{{info.key}} : </span> </ion-col>
                            <ion-col class="no-margin" width-80><span class='additionalInfo'>{{info.value}} </span></ion-col>
                        </ion-row>
                    </ion-item>
                </ion-list>

                <product-review [skuData]="data.sku"> loading..</product-review>               
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
<ion-footer class="uppercase ">
    <btn-full  [titleFull]='cartButtonTitle'  [id]="'btn'"  [classFull]="'botton'" [spinFull]="cartSpin" [validFull]="disable" (onBtnClick)="addToCartService()"></btn-full>
</ion-footer>