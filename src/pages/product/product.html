<header [pagename]="'product'" [title]='product'></header>
<ion-content [ngClass]="{'no-footer': productData && productData.body.data.in_stock=='Out of Stock','product':true}">
    <ion-spinner class="apiSpinner" *ngIf="spin && !error"></ion-spinner>
    <p class="error" *ngIf="error" style="color:#f00; text-align: center;">Check Network Connection</p>
    <ion-grid no-padding *ngIf="productData">
              <ion-row  responsive-lg responsive-md responsive-sm>
            <ion-col no-padding width-100 >
                <ion-grid no-padding >
                    <ion-row no-padding class="slideOption" >
                        <ion-col no-padding class='backgroungW'>
                            <ion-slides *ngIf="productData && productData.body.data.media_images.length"  [options]="mySlideOptions" autoplay="{{mySlideOptions.autoplay}}" loop="{{(productData.body.data.media_images.length == 1)? false:mySlideOptions.loop}}" pager="{{(productData.body.data.media_images.length == 1)? false:mySlideOptions.pager}}">
                                <ion-slide *ngFor = "let images of productData.body.data.media_images">
                                    <img *ngIf="images" src="{{images}}" class="cursorPointer" style="max-height: 250px;" imageViewer/>
                                </ion-slide>
                            </ion-slides>
                        </ion-col>
                    </ion-row>
                </ion-grid>
                <ion-card class="productTitleCard">
                    <ion-card-content>
                        <ion-row class="padLeft10" >
                            <ion-col  class='no-margin lineH0 no-padding'>
                                <ion-row>
                                    <ion-col width-80 class="padTB no-margin">
                                        <h2 class="capitalize no-margin productName">{{productData.body.data.name}}</h2>
                                    </ion-col> 
                                    <ion-col class="no-margin no-padding" width-20 [ngClass]="{'fullCol':productData.body.data.in_stock!='Out of Stock'}">     
                                             <btn-full *ngIf="productData.body.data.in_stock=='Out of Stock'" class="notifyBt" [titleFull]="'Notify Me'" (click)="notifySet()"></btn-full>
                                    </ion-col>
                                </ion-row>
                                <ion-row>
                                    <ion-col width-80 class="padTB no-margin">
                                        <p class="stock">{{productData.body.data.in_stock}}</p>
                                    </ion-col>
                                    <ion-col class="no-margin" width-20>
                                        <span class="productWishList" >
                                            <ion-fab>
                                                <button ion-fab mini (click)="shareWithOptions(productData.body.data.name,productData.body.data.media_images)"><ion-icon name="share"></ion-icon></button>
                                            </ion-fab>
                                        </span>
                                    </ion-col> 
                                </ion-row>
                            </ion-col>            
                        </ion-row>
                        <ion-row> 
                            <ion-col width-80 class="padTB no-margin"> 
                                <span id="font13" [ngClass]="{'line':(display_price*1) > (final_price*1), 'hide':(display_price*1) <= (final_price*1) , 'price':true}" class="price">{{productData.body.data.currency_sign}}{{display_price}}</span>
                                <span color="{{((display_price*1) > (final_price*1))? 'red': ''}}" [ngClass]="{'paddLeft10':(display_price*1) <= (final_price*1),'lineH2-4':true,'sPrice':true}" ><span *ngIf="(display_price*1) > (final_price*1)">Special Price</span> {{productData.body.data.currency_sign}}{{final_price}}</span>
                            </ion-col>
                            <ion-col width-20 class="no-margin no-padding">
                                <div class="heart floatRight" [ngClass]="{'is_animating':productData.body.data.wishlist_item_id}" (click)="wishList(productData.body)"></div>
                                <!--                                <span  class="productWishList lightRed"  (click)="wishList(productData.body)">
                                                                    <i class="fa fa-heart" aria-hidden="true" ></i>
                                                                </span>-->
                            </ion-col>
                        </ion-row>
                    </ion-card-content>
                </ion-card>
                <span *ngIf="type=='configurable'">
                    <ion-row  *ngFor="let key of keys">
                        <ion-col *ngIf="productData.body.associated_products">
                            <ion-item class="selectlist">
                                <ion-label no-margin class="capitalize config">{{productData.body.associated_products.attributes[key].label}}</ion-label>
                                <ion-label class="font12 config no-margin" *ngIf="productData.body.associated_products.attributes[key].label=='Color'">
                                    <ion-buttons class="alignright">
                                        <ion-icon name="radio-button-on" dark id="color"></ion-icon>
                                    </ion-buttons>
                                </ion-label>
                                <ion-select [(ngModel)]="productData.body.associated_products.attributes[key].vertualKey"  [placeholder]="'select'"  (ngModelChange)="onChangeConfigurableAttribute(productData.body.associated_products.attributes[key].vertualKey, key)">
                                    <span *ngFor= "let obj of productData.body.associated_products.attributes[key].options">
                                        <ion-option *ngIf="selectshow || obj.shown"  [value]="obj" >
                                            <ion-label no-margin class="font12">
                                                {{obj.label}}&nbsp;<span *ngIf="obj.price*1>0">+{{productData.body.data.currency_sign}}{{obj.price}}</span>
                                            </ion-label>
                                        </ion-option>
                                    </span>
                                </ion-select>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                </span>
                <!--for group product-->
                <span *ngIf="type=='grouped'">
                    <group [grouped]="productData.body" [editCartData]="editCartData" (sendData)="group($event)"></group>
                </span>

                <!--for bundle product-->

                <span *ngIf="type=='bundle'">
                    <bundle [bundle]="productData.body" [editCartData]="editCartData" (onChangeData)=diffrentTypeProductData($event) (onChange)=bundle($event)></bundle>
                </span>
                <!--                for downloadable product-->
                <span *ngIf="type == 'downloadable'">
                    <download  [data]="productData" [editCartData]="editCartData" (onChange)="diffrentTypeProductData($event)"></download>
                </span>
                <!--for custom product-->
                <custom  [data]="productData" [editCartData]="editCartData" (onChange)="customData($event)"></custom>
                <!--show TierPrice Data-->
                <div *ngIf="show_add_to_cart && show_add_to_cart.length > 0">
                    <ion-row *ngFor="let data of show_add_to_cart">
                        <ion-col class="padTB">
                            <p class="no-margin font20 padLeft10 capitalize offer fontWidth600" >Buy {{data.price_qty }}  for {{productData.body.data.currency_sign}} {{data.tierPrice | number}} each.  </p>
                        </ion-col>
                    </ion-row>
                </div>

                <!--product description-->
                <ion-row>
                    <ion-col class="padTB">
                        <p class=" font13 padLeft10 capitalize "  [ngClass]="{'marginBottom50': true}">{{productData.body.data.short_description}}</p>
                    </ion-col>
                </ion-row>
                <!--additionalInformation Data-->
                <ion-list *ngIf="additionalInformationData.length > 0 ">
                    <h4 class="padLeft20 capitalize">Additional Information</h4>
                    <ion-item *ngFor="let info of additionalInformationData">
                        <ion-row>
                            <ion-col class="no-margin no-padding" width-20> <span class="additionalInformation capitalize">{{info.key}} : </span> </ion-col>
                            <ion-col class="no-margin" width-80><span class='additionalInfo'>{{info.value}} </span></ion-col>
                        </ion-row>
                    </ion-item>
                </ion-list>
                <!--review directive-->
                <product-review  [skuData]="data.sku"> loading..</product-review>               
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
<ion-footer [ngClass]="{'none': productData && productData.body.data.in_stock=='Out of Stock','uppercase':true}">
    <btn-full  [titleFull]='cartButtonTitle'  [id]="'btn'"  [classFull]="'botton'" [spinFull]="cartSpin" [validFull]="disable" (onBtnClick)="addToCartService()"></btn-full>
</ion-footer>
