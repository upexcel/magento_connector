<ion-header id="product">
<header [pagename]="'product'" [search]='true' [title]='product' [classHeader]="'product'" ></header>
</ion-header>
<ion-content  shrink-header="product" [ngClass]="{'no-footer': productData && productData.body.data.in_stock=='Out of Stock','product':true}" >
             <!--<div class="center" padding-top *ngIf="error" ><ion-badge color="danger" >{{error}}</ion-badge></div>--> 

             <!--<ion-refresher *ngIf="!editCartData" (ionRefresh)="doRefresh($event)">-->
                 <!--        <ion-refresher-content
                             pullingIcon="arrow-dropdown"
                             pullingText="Pull to refresh"
                             refreshingSpinner="circles"
                             refreshingText="Refreshing...">
                         </ion-refresher-content>
                     </ion-refresher> -->
    <span class="center" *ngIf="message"> 
        <div class="center" padding-top  ><ion-badge color="alert_yellow" >No Item Found</ion-badge></div> 
    </span>
    <ion-spinner class="apiSpinner" *ngIf="spin && !error"></ion-spinner>
    <p class="error" *ngIf="error" style="color:#f00; text-align: center;">Check Network Connection</p>
    <ion-grid no-padding *ngIf="productData" class="maxHeight">
              <ion-row  responsive-lg responsive-md responsive-sm class="maxHeight">
            <ion-col no-padding col-12>
                <ion-row no-padding class="slideOption" >
                    <ion-col no-padding class='backgroungW'>
                        <ion-slides *ngIf="productData && productData.body.data.media_images.length" autoplay="{{mySlideOptions.autoplay}}"  pager="{{(productData.body.data.media_images.length == 1)? false:mySlideOptions.pager}}">
                            <ion-slide *ngFor = "let images of productData.body.data.media_images;trackBy: trackmyImageFn">
                                <img *ngIf="images" src="{{images}}" class="cursorPointer" style="max-height: 250px;" imageViewer/>
                            </ion-slide>
                        </ion-slides>
                    </ion-col>
                </ion-row>
                <ion-card class="productTitleCard">
                    <ion-card-content class="no-padding">
                        <ion-item>
                            <div item-start>
                                <h2 class="capitalize roboto productName padTB">{{productData.body.data.name}}</h2>
                                <h3 class="stock padTB" *ngIf="productData.body.data.in_stock">{{productData.body.data.in_stock}}</h3>
                                <span id="font13" [ngClass]="{'line':(display_special_price*1) == (final_price*1), 'hide':(display_price*1) <= (final_price*1) , 'price':true}" class="price">{{productData.body.data.currency_sign}}{{display_price | number:'.0-2'}}</span>
                                <span  [ngClass]="{'paddLeft10':(display_price*1) == (final_price*1),'lineH2-4':true,'sPrice':true,'fontWeight':true,'sans':true}" [style.color]="((display_price*1) > (final_price*1))? '#387ef5': 'black'"><span *ngIf="(display_price*1) > (final_price*1)">Special Price</span> {{productData.body.data.currency_sign}}{{final_price |number:'.0-2'}}</span>

                                <p *ngIf="type=='bundle'" class="padTB" [innerHtml]="transformPrice(productData.body.data)"></p>

                            </div>
                            <div item-end no-margin style="border:1px solid rgb(212, 212, 212)">
                                <ion-item (tap)="wishList(productData.body)" style="border-bottom: 1px solid rgb(212, 212, 212)">
                                    <ion-icon color="lightGray" name="heart"  [ngClass]="{'lightRed':productData.body.data.wishlist_item_id}"></ion-icon>
                                </ion-item> 
                                <ion-item (tap)="shareWithOptions(productData.body.data.name,productData.body.data.media_images,productData.body.data.productUrl)">
                                    <ion-icon color="lightGray" name="share"></ion-icon>
                                </ion-item>
                            </div>
                        </ion-item>
                    </ion-card-content>
                </ion-card>
                <ion-card class="productTitleCard" *ngIf="type=='configurable'">
                    <ion-card-content>
                        <ion-row  *ngFor="let key of keys ;trackBy: trackmykeyFn">
                            <ion-col *ngIf="productData.body.associated_products">
                                <ion-item class="selectlist">
                                    <ion-label no-margin class="capitalize config">{{productData.body.associated_products.attributes[key].label}}</ion-label>
                                    <ion-label class="font12 config no-margin" *ngIf="productData.body.associated_products.attributes[key].label=='Color'">
                                        <ion-buttons class="alignright">
                                            <ion-icon name="radio-button-on" dark id="color"></ion-icon>
                                        </ion-buttons>
                                    </ion-label>
                                    <ion-select  [(ngModel)]="productData.body.associated_products.attributes[key].vertualKey"  [placeholder]="'select'"  (ngModelChange)="onChangeConfigurableAttribute(productData.body.associated_products.attributes[key].vertualKey, key)">
                                        <span *ngFor= "let obj of productData.body.associated_products.attributes[key].options ;trackBy: trackmyAssociated_productsFn">
                                            <ion-option *ngIf="selectshow || obj.shown"  [value]="obj" >
                                                <ion-label no-margin class="font12" *ngIf="obj.label">
                                                    {{obj.label}}&nbsp;<span *ngIf="obj && obj.price*1 > 0 " >+{{productData.body.data.currency_sign}}{{obj.price}}</span>
                                                </ion-label>
                                            </ion-option>
                                        </span>
                                    </ion-select>
                                </ion-item>
                            </ion-col>
                        </ion-row>
                    </ion-card-content>
                </ion-card>
                <!--for group product-->
                <span *ngIf="type=='grouped' && (productData || editCartData)">
                    <group [grouped]="productData.body" [editCartData]="editCartData" (sendData)="group($event)"></group>
                </span>

                <!--for bundle product-->
                <ion-card class="productTitleCard" *ngIf="type=='bundle'">
                    <ion-card-content>
                        <bundle [bundle]="productData.body" [editCartData]="editCartData" (onChangeData)=diffrentTypeProductData($event) (onChange)=bundle($event)></bundle>
                    </ion-card-content>
                </ion-card>
                <!--                for downloadable product-->
                <span *ngIf="type == 'downloadable'">
                    <download  [data]="productData" [editCartData]="editCartData" (onChange)="diffrentTypeProductData($event)"></download>
                </span>
                <!--for custom product-->
                <custom  [data]="productData" [editCartData]="editCartData" (onChange)="customData($event)"></custom>
                <!--show TierPrice Data-->
                <div *ngIf="show_add_to_cart && show_add_to_cart.length > 0">
                    <ion-row *ngFor="let data of show_add_to_cart;trackBy: trackmy_add_to_cart">
                        <ion-col class="padTB">
                            <p class="no-margin font20 padding10 capitalize offer fontWidth600" >Buy {{data.price_qty }}  for {{productData.body.data.currency_sign}} {{data.tierPrice | number:'.0-2'}} each.  </p>
                        </ion-col>
                    </ion-row>
                </div>

                <!--product description-->
                <ion-card class="productTitleCard" *ngIf="productData.body.data['long_description']">
                    <btn-full *ngIf="productData.body.data.in_stock=='Out of Stock'" padding [ngClass]="{'fullCol':productData.body.data.in_stock!='Out of Stock','notifyBt':true}"  [titleFull]="'Notify Me'" (tap)="notifySet()"></btn-full>
                    <ion-card-header>
                        Description
                    </ion-card-header>
                    <ion-card-content>
                        <p class=" font13 padTB capitalize "  [ngClass]="{'marginBottom50': true, 'description':true}" [innerHtml]="transform(productData) "></p>
                    </ion-card-content>
                </ion-card>

                <!--additionalInformation Data-->
                <ion-list no-margin *ngIf="additionalInformationData  && additionalInformationData.length > 0 ">
                          <ion-list-header>
                        Additional Information
                    </ion-list-header>  
                    <ion-item *ngFor="let info of additionalInformationData ;trackBy: trackmy_additionalInformationData">
                        <ion-row>
                            <ion-col class="no-margin no-padding" col-6> <span class="additionalInformation capitalize">{{info.key}} : </span> </ion-col>
                            <ion-col class="no-margin" col-6><span class='additionalInfo'>{{info.value}} </span></ion-col>
                        </ion-row>
                    </ion-item>
                </ion-list>
                <!--review directive-->
                <span *ngIf="reviewLoader && (data && data.sku)">
                    <product-review  [skuData]="data.sku" [additionalInformationData]="additionalInformationData" [addToCartButton]='true'> loading..</product-review> </span>              
            </ion-col>
        </ion-row>
    </ion-grid>
    <related-product  *ngIf="productData" [content]='content' [relatedData]='relatedData' (onSelect)="relatedProductItemClick($event)"></related-product>
</ion-content>
<ion-footer [ngClass]="{'uppercase':true}">
    <ion-grid class="filterFooterBtnDiv no-padding" *ngIf="(productData && productData.body.data.in_stock!='Out of Stock')">
              <ion-row>
            <ion-col col-6>
                <!-- col button directive -->
                <btn-large [titleForLarge]='cartButtonTitle' [classForLarge]="' radius filterFooterBtn filterFooterBtnSecond font17'" [spinForLarge]="cartSpin" [idForLarge]="'btn'" [colorForLarge]="''" (onBtnClick)="addToCartService()"></btn-large>
            </ion-col>
            <ion-col col-6>
                <!-- col button directive -->
                <btn-large [titleForLarge]='"Review Product"' [classForLarge]="' filterFooterBtn radius writeButt font17'" [spinForLarge]="false"  [colorForLarge]="''" [validForLarge]="false" (onBtnClick)="addReview()"></btn-large>
            </ion-col>
        </ion-row>
    </ion-grid> 
    <btn-full *ngIf="productData && productData.body.data.in_stock=='Out of Stock'"  [titleFull]='"Review Product"' [spinFull]="false"  [colorFull]="''" [validFull]="false" [classFull]="'writeButt botton reviewBtn'" (click)="addReview()"></btn-full>
</ion-footer>
